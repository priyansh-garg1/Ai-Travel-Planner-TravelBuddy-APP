const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "  Generate Travel Plan for Location : New York USA, for 1 Days and 1 Night for Family with a Luxury budget with a flight details , Flight Price with Booking url, Hotels options list with Hotel Name, Hotel Address, Price, Hotel Image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket pricing, Time to travel each of the location for 1 days and 1 night with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "travelPlan": {\n    "destination": "New York City, USA",\n    "duration": "1 Day & 1 Night",\n    "budget": "Luxury",\n    "flightDetails": {\n      "airline": "Delta Airlines",\n      "flightNumber": "DL1234",\n      "departureAirport": "Los Angeles International Airport (LAX)",\n      "arrivalAirport": "John F. Kennedy International Airport (JFK)",\n      "departureDate": "2024-03-15",\n      "departureTime": "10:00 AM",\n      "arrivalDate": "2024-03-15",\n      "arrivalTime": "1:00 PM",\n      "flightPrice": "$500",\n      "bookingUrl": "https://www.delta.com/booking"\n    },\n    "hotelOptions": [\n      {\n        "hotelName": "The Peninsula New York",\n        "hotelAddress": "700 Fifth Avenue, New York, NY 10019",\n        "price": "$1,500+",\n        "hotelImageUrl": "https://www.thepeninsula.com/new-york/en/images/hotel-gallery/exterior-night.jpg",\n        "geoCoordinates": {\n          "latitude": 40.7580,\n          "longitude": -73.9855\n        },\n        "rating": 4.5,\n        "description": "A luxurious and elegant hotel in Midtown Manhattan with stunning views of Central Park and Fifth Avenue."\n      },\n      {\n        "hotelName": "The Ritz-Carlton New York, Central Park",\n        "hotelAddress": "50 Central Park South, New York, NY 10019",\n        "price": "$1,200+",\n        "hotelImageUrl": "https://www.ritzcarlton.com/en/hotels/new-york/central-park/images/hotel-gallery/exterior-night.jpg",\n        "geoCoordinates": {\n          "latitude": 40.7649,\n          "longitude": -73.9771\n        },\n        "rating": 4.7,\n        "description": "A classic luxury hotel with exceptional service and an ideal location overlooking Central Park."\n      },\n      {\n        "hotelName": "The Four Seasons Hotel New York Downtown",\n        "hotelAddress": "27 Barclay Street, New York, NY 10007",\n        "price": "$1,000+",\n        "hotelImageUrl": "https://www.fourseasons.com/newyorkdowntown/images/hotel-gallery/exterior-day.jpg",\n        "geoCoordinates": {\n          "latitude": 40.7130,\n          "longitude": -74.0075\n        },\n        "rating": 4.6,\n        "description": "A modern and stylish hotel in the Financial District with stunning views of the city skyline and the Statue of Liberty."\n      }\n    ],\n    "placesToVisit": [\n      {\n        "placeName": "Central Park",\n        "placeDetails": "A vast urban oasis in the heart of Manhattan, offering a range of activities like walking, biking, picnicking, and visiting the Bethesda Terrace and Strawberry Fields."\n        "placeImageUrl": "https://www.nycgovparks.org/images/parks/central-park/central-park_500.jpg",\n        "geoCoordinates": {\n          "latitude": 40.7829,\n          "longitude": -73.9654\n        },\n        "ticketPricing": "Free",\n        "timeToTravel": "2-3 hours"\n      },\n      {\n        "placeName": "Times Square",\n        "placeDetails": "A bustling entertainment hub known for its dazzling billboards, Broadway theaters, and vibrant atmosphere."\n        "placeImageUrl": "https://www.nycgo.com/images/things-to-do/iconic-landmarks/times-square-470x353.jpg",\n        "geoCoordinates": {\n          "latitude": 40.7589,\n          "longitude": -73.9851\n        },\n        "ticketPricing": "Free",\n        "timeToTravel": "1-2 hours"\n      },\n      {\n        "placeName": "The Metropolitan Museum of Art",\n        "placeDetails": "A world-renowned museum with an extensive collection of art and artifacts from around the world, spanning different cultures and eras."\n        "placeImageUrl": "https://www.metmuseum.org/sites/default/files/styles/featured-image/public/images/features/2023/12/met-museum-exterior.jpg",\n        "geoCoordinates": {\n          "latitude": 40.7794,\n          "longitude": -73.9632\n        },\n        "ticketPricing": "$25 (suggested donation)",\n        "timeToTravel": "3-4 hours"\n      },\n      {\n        "placeName": "Top of the Rock Observation Deck",\n        "placeDetails": "A panoramic observation deck atop the Rockefeller Center, offering stunning views of the city skyline, including Central Park and the Empire State Building."\n        "placeImageUrl": "https://www.topoftheRockNYC.com/images/hero/hero-mobile-totr-desk.jpg",\n        "geoCoordinates": {\n          "latitude": 40.7580,\n          "longitude": -73.9789\n        },\n        "ticketPricing": "$39",\n        "timeToTravel": "1-2 hours"\n      }\n    ],\n    "dayPlan": {\n      "day1": {\n        "morning": {\n          "time": "9:00 AM - 12:00 PM",\n          "activity": "Explore Central Park, enjoy a leisurely walk, bike ride, or picnic by the Bethesda Fountain.",\n          "placesToVisit": [\n            {\n              "placeName": "Central Park",\n              "placeDetails": "Central Park"\n            }\n          ]\n        },\n        "afternoon": {\n          "time": "12:00 PM - 3:00 PM",\n          "activity": "Lunch at The Loeb Boathouse in Central Park, followed by a boat ride.",\n          "placesToVisit": [\n            {\n              "placeName": "The Loeb Boathouse",\n              "placeDetails": "A restaurant and boathouse in Central Park."\n            }\n          ]\n        },\n        "evening": {\n          "time": "3:00 PM - 6:00 PM",\n          "activity": "Visit the Metropolitan Museum of Art, one of the world\'s largest and most renowned museums.",\n          "placesToVisit": [\n            {\n              "placeName": "The Metropolitan Museum of Art",\n              "placeDetails": "The Metropolitan Museum of Art"\n            }\n          ]\n        },\n        "night": {\n          "time": "6:00 PM - 9:00 PM",\n          "activity": "Enjoy a gourmet dinner at a Michelin-starred restaurant in Midtown Manhattan.",\n          "placesToVisit": [\n            {\n              "placeName": "Restaurant",\n              "placeDetails": "Your choice of Michelin-starred restaurant."\n            }\n          ]\n        }\n      },\n      "day2": {\n        "morning": {\n          "time": "9:00 AM - 12:00 PM",\n          "activity": "Visit Times Square, witness the vibrant atmosphere, and take photos with the iconic billboards.",\n          "placesToVisit": [\n            {\n              "placeName": "Times Square",\n              "placeDetails": "Times Square"\n            }\n          ]\n        },\n        "afternoon": {\n          "time": "12:00 PM - 3:00 PM",\n          "activity": "Head to the Top of the Rock Observation Deck for breathtaking panoramic views of the city skyline.",\n          "placesToVisit": [\n            {\n              "placeName": "Top of the Rock Observation Deck",\n              "placeDetails": "Top of the Rock Observation Deck"\n            }\n          ]\n        },\n        "evening": {\n          "time": "3:00 PM - 6:00 PM",\n          "activity": "Experience Broadway theater, catch a show at a renowned theater in Times Square.",\n          "placesToVisit": [\n            {\n              "placeName": "Broadway Theater",\n              "placeDetails": "Your choice of Broadway theater."\n            }\n          ]\n        },\n        "night": {\n          "time": "6:00 PM - 9:00 PM",\n          "activity": "Enjoy a farewell dinner at a fine-dining restaurant with stunning views.",\n          "placesToVisit": [\n            {\n              "placeName": "Restaurant",\n              "placeDetails": "Your choice of fine-dining restaurant."\n            }\n          ]\n        }\n      }\n    }\n  }\n}\n```\n\n**Notes:**\n\n* This is just a sample travel plan and can be customized based on your family\'s interests and preferences.\n* Flight prices and hotel prices are subject to change based on availability and time of booking.\n* Consider booking your flights and hotel in advance, especially during peak seasons.\n* It\'s recommended to purchase tickets for popular attractions like Top of the Rock in advance to avoid long queues.\n* Be sure to check the opening hours and ticket prices of the places you wish to visit before your trip.\n* This plan includes a mix of cultural and entertainment activities, offering a well-rounded experience for a family. \n',
        },
      ],
    },
  ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());
